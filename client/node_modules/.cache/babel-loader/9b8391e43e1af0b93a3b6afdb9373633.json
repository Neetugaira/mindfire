{"ast":null,"code":"import _objectSpread from \"/home/neetu/mindfire-app/mindfire-app/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/neetu/mindfire-app/mindfire-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/neetu/mindfire-app/mindfire-app/client/src/components/login/Login.js\";\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport request from '../../utils/request';\nimport { toast } from 'react-toastify';\n\nfunction Login({\n  history\n}) {\n  let _useState = useState({\n    email: '',\n    password: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      loginData = _useState2[0],\n      setLoginData = _useState2[1];\n\n  let _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      err_email = _useState4[0],\n      setErr_email = _useState4[1];\n\n  let _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      emailValid = _useState6[0],\n      setEmailValid = _useState6[1];\n\n  let _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      err_password = _useState8[0],\n      setErr_password = _useState8[1];\n\n  const handelChange = event => setLoginData(_objectSpread({}, loginData, {\n    [event.target.name]: event.target.value\n  }));\n\n  const validateForm = () => {\n    setEmailValid(true);\n    let isFormValid = true;\n\n    if (loginData.email === '') {\n      setEmailValid(true);\n      isFormValid = false;\n      setErr_email(\"*Please enter your Email-ID.\");\n    }\n\n    if (loginData.email !== '') {\n      //regular expression for email validation\n      var pattern = new RegExp(/^((\"[\\w-\\s]+\")|([\\w-]+(?:\\.[\\w-]+)*)|(\"[\\w-\\s]+\")([\\w-]+(?:\\.[\\w-]+)*))(@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$)|(@\\[?((25[0-5]\\.|2[0-4][0-9]\\.|1[0-9]{2}\\.|[0-9]{1,2}\\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\]?$)/i);\n\n      if (!pattern.test(loginData.email)) {\n        setEmailValid(false);\n        isFormValid = false;\n        setErr_email(\"*Please enter valid Email-ID.\");\n      }\n    }\n\n    if (loginData.password === '') {\n      isFormValid = false;\n      setErr_password(\"*Please enter your Password.\");\n    }\n\n    return isFormValid;\n  };\n\n  const submit = () => {\n    const isValid = validateForm();\n\n    if (isValid) {\n      let credentials = {\n        email: loginData.email,\n        password: loginData.password\n      };\n      request('POST', '/auth/login', {\n        data: credentials\n      }).then(res => {\n        console.log(\"<<<<<<vvvv\", res);\n\n        if (res.data.success) {\n          let currentUser = res.data.user;\n          localStorage.setItem(\"auth_token\", res.data.token);\n          localStorage.setItem('currentUser', JSON.stringify(currentUser));\n          toast.success(res.data.message);\n          history.push('/dashboard');\n        } else {\n          toast.error(res.data.message);\n        }\n      });\n    }\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"login log-screen\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"log-in\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"Zeeve Login\"), React.createElement(\"label\", {\n    htmlFor: \"username\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Email ID\"), React.createElement(\"input\", {\n    type: \"text\",\n    name: \"email\",\n    onChange: handelChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }), loginData.email === '' || !emailValid ? React.createElement(\"div\", {\n    className: \"errorMsg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, err_email) : null, React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \"Password\"), React.createElement(\"input\", {\n    type: \"password\",\n    className: \"form-control\",\n    onChange: handelChange,\n    name: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }), loginData.password === '' ? React.createElement(\"div\", {\n    className: \"errorMsg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, err_password) : null, React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: submit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"Login\")))));\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/neetu/mindfire-app/mindfire-app/client/src/components/login/Login.js"],"names":["React","useState","Link","request","toast","Login","history","email","password","loginData","setLoginData","err_email","setErr_email","emailValid","setEmailValid","err_password","setErr_password","handelChange","event","target","name","value","validateForm","isFormValid","pattern","RegExp","test","submit","isValid","credentials","data","then","res","console","log","success","currentUser","user","localStorage","setItem","token","JSON","stringify","message","push","error"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport request from '../../utils/request';\nimport {toast} from 'react-toastify';\n\nfunction Login({history}) {\n  let [loginData, setLoginData] = useState({\n    email: '',\n    password: ''\n  })\n  let [err_email,  setErr_email] = useState('')\n  let [emailValid, setEmailValid] = useState(false);\n  let [err_password,  setErr_password] = useState('')\n\n  const handelChange = event => setLoginData({ ...loginData, [event.target.name]: event.target.value })\n\n  const validateForm = () => {\n    setEmailValid(true);\n    let isFormValid = true;\n\n    if(loginData.email === '') {\n      setEmailValid(true);\n      isFormValid =false;\n     setErr_email(\"*Please enter your Email-ID.\");\n    }\n    if (loginData.email !== '') {\n      //regular expression for email validation\n      var pattern = new RegExp(/^((\"[\\w-\\s]+\")|([\\w-]+(?:\\.[\\w-]+)*)|(\"[\\w-\\s]+\")([\\w-]+(?:\\.[\\w-]+)*))(@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$)|(@\\[?((25[0-5]\\.|2[0-4][0-9]\\.|1[0-9]{2}\\.|[0-9]{1,2}\\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\]?$)/i);\n      if (!pattern.test(loginData.email)) {\n        setEmailValid(false);\n        isFormValid =false;\n        setErr_email(\"*Please enter valid Email-ID.\");\n      }\n    }\n\n    if(loginData.password === '') {\n      isFormValid =false;\n     setErr_password(\"*Please enter your Password.\");\n    }\n    return isFormValid;\n  }\n  const submit = () => {\n      const isValid = validateForm();\n      if(isValid) {\n        let credentials = {\n          email: loginData.email,\n          password: loginData.password\n        }\n        request('POST', '/auth/login', {\n          data: credentials\n        }).then(res => {\n          console.log(\"<<<<<<vvvv\", res)\n          if (res.data.success) {\n            let currentUser = res.data.user;\n            localStorage.setItem(\"auth_token\",res.data.token)\n            localStorage.setItem('currentUser', JSON.stringify(currentUser));\n            toast.success(res.data.message);\n            history.push('/dashboard')\n          } else {\n            toast.error(res.data.message);\n          }\n        })\n      }\n  }\n  return (\n    <>\n    <div className=\"login log-screen\">\n      <div>\n        <div className=\"log-in\">\n          <div className=\"card-header\">Zeeve Login</div>\n          {/* <div className={'form-group' + (submitted && !username ? ' has-error' : '')}> */}\n          <label htmlFor=\"username\">Email ID</label>\n          <input type=\"text\" name=\"email\" onChange={handelChange} />\n          { loginData.email === '' || !emailValid ?\n              <div className=\"errorMsg\">{err_email}</div> : null}\n          <label htmlFor=\"password\">Password</label>\n          <input type=\"password\" className=\"form-control\" onChange={handelChange} name=\"password\" />\n          { loginData.password === '' ?\n              <div className=\"errorMsg\">{err_password}</div>: null}\n          <button type=\"submit\" onClick={submit}>Login</button>\n          {/*<span className=\"psw\" data-toggle=\"modal\" data-target=\"#popstats1\"><a href=\"/auth/forgotPassword\">Forgot Password ?</a></span>*/}\n        </div>\n      </div>\n    </div>\n    </>\n  )\n}\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}